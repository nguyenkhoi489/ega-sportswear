{"version":3,"file":"yith-wcan-admin-filters.js","mappings":"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","sources":["webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/shortcodes/globals.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/ajax.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/conf.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/yith-wcan-dependencies-handler.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/yith-wcan-filter-term.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/yith-wcan-filter-range.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/yith-wcan-filter.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/modules/yith-wcan-preset.js","webpack://yith-woocommerce-ajax-product-filter-premium/./assets/js/admin-filters/index.js"],"sourcesContent":["'use strict';\n\n/* global globalThis, jQuery, yith_wcan_shortcodes, accounting */\n\nconst $ = jQuery, // we can do this as WebPack will compact all together inside a closure.\n\t$body = $( 'body' ),\n\tblock = ( $el ) => {\n\t\tif ( typeof $.fn.block === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet background = '#fff center center no-repeat';\n\n\t\tif (\n\t\t\t'undefined' !== typeof yith_wcan_shortcodes &&\n\t\t\tyith_wcan_shortcodes?.loader\n\t\t) {\n\t\t\tbackground = `url('${ yith_wcan_shortcodes.loader }') ${ background }`;\n\t\t}\n\n\t\t$el.block( {\n\t\t\tmessage: null,\n\t\t\toverlayCSS: {\n\t\t\t\tbackground,\n\t\t\t\topacity: 0.7,\n\t\t\t},\n\t\t} );\n\t},\n\tunblock = ( $el ) => {\n\t\tif ( typeof $.fn.unblock === 'undefined' ) {\n\t\t\treturn;\n\t\t}\n\n\t\t$el.unblock();\n\t},\n\tserialize = ( $el, { formatName, filterItems } ) => {\n\t\tlet result = {},\n\t\t\tinputs = $el.find( ':input' ).not( '[disabled]' );\n\n\t\tif ( typeof filterItems === 'function' ) {\n\t\t\tinputs = inputs.filter( filterItems );\n\t\t}\n\n\t\tinputs.each( function () {\n\t\t\tlet t = $( this ),\n\t\t\t\tname = t.attr( 'name' ),\n\t\t\t\tvalue;\n\n\t\t\tif ( ! name ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// removes ending brackets, since are not needed\n\t\t\tname = name.replace( /^(.*)\\[]$/, '$1' );\n\n\t\t\t// offers additional name formatting from invoker\n\t\t\tif ( typeof formatName === 'function' ) {\n\t\t\t\tname = formatName( name );\n\t\t\t}\n\n\t\t\t// retrieve value, depending on input type\n\t\t\tif ( t.is( '[type=\"radio\"]' ) && ! t.is( ':checked' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvalue = t.val();\n\n\t\t\t// if name is composite, try to recreate missing structure\n\t\t\tif ( -1 !== name.indexOf( '[' ) ) {\n\t\t\t\tconst components = name\n\t\t\t\t\t\t.split( '[' )\n\t\t\t\t\t\t.map( ( c ) => c.replace( /[\\[, \\]]/g, '' ) ),\n\t\t\t\t\tfirstComponent = components.shift(),\n\t\t\t\t\tnewItem = components\n\t\t\t\t\t\t.reverse()\n\t\t\t\t\t\t.reduce( ( res, key ) => ( { [ key ]: res } ), value );\n\n\t\t\t\tif ( typeof result[ firstComponent ] === 'undefined' ) {\n\t\t\t\t\tresult[ firstComponent ] = newItem;\n\t\t\t\t} else {\n\t\t\t\t\tresult[ firstComponent ] = $.extend(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tresult[ firstComponent ],\n\t\t\t\t\t\tnewItem\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// else simply append value to result object\n\t\t\telse {\n\t\t\t\tresult[ name ] = value;\n\t\t\t}\n\t\t} );\n\n\t\treturn result;\n\t},\n\tremoveHierarchyFromString = ( value ) => {\n\t\treturn value\n\t\t\t.replace( /^(.*>)([^>]+)$/, '$2' )\n\t\t\t.replace( '&amp;', '&' )\n\t\t\t.trim();\n\t};\n\nexport { $, $body, block, unblock, serialize, removeHierarchyFromString };\n","'use strict';\n\n/* global ajaxurl */\n\nimport { $, block, unblock } from '../../shortcodes/globals.js';\n\nconst request = function ( method, action, params, args ) {\n\t\t// retrieve wrapper as current context.\n\t\tconst $wrapper = $( this );\n\n\t\tif ( params instanceof FormData ) {\n\t\t\tparams.append( 'action', `yith_wcan_${ action }` );\n\t\t} else {\n\t\t\tparams = {\n\t\t\t\taction: `yith_wcan_${ action }`,\n\t\t\t\t...params,\n\t\t\t};\n\t\t}\n\n\t\tconst ajaxArgs = {\n\t\t\turl: ajaxurl,\n\t\t\tdata: params,\n\t\t\tdataType: 'json',\n\t\t\tmethod,\n\t\t\tbeforeSend: () => $wrapper.length && block( $wrapper ),\n\t\t\tcomplete: () => $wrapper.length && unblock( $wrapper ),\n\t\t\t...args,\n\t\t};\n\n\t\treturn $.ajax( ajaxArgs );\n\t},\n\tget = function ( ...params ) {\n\t\treturn request.call( this, 'get', ...params );\n\t},\n\tpost = function ( ...params ) {\n\t\treturn request.call( this, 'post', ...params );\n\t};\n\nexport default { request, get, post };\n","'use strict';\n\n/* global jQuery */\n\nconst filterFieldsDependencies = {\n\ttaxonomy: {\n\t\ttype: 'tax',\n\t},\n\tuse_all_terms: {\n\t\ttype: 'tax',\n\t},\n\tterm_ids: {\n\t\ttype: 'tax',\n\t\tuse_all_terms: '!:checked',\n\t},\n\tfilter_design: {\n\t\ttype: [ 'tax', 'review', 'price_range' ],\n\t},\n\tcustomize_terms: {\n\t\ttype: 'tax',\n\t\tuse_all_terms: '!:checked',\n\t},\n\tterms_options: {\n\t\tterm_ids: ( v ) => !! v,\n\t\tcustomize_terms: ':checked',\n\t\t__show: ( filter ) => filter.afterTermsSelected(),\n\t},\n\tlabel_position: {\n\t\tfilter_design: [ 'color', 'label' ],\n\t},\n\tcolumn_number: {\n\t\tfilter_design: [ 'label', 'color' ],\n\t\tlabel_position: [ 'below', 'hide' ],\n\t},\n\tshow_search: {\n\t\ttype: 'tax',\n\t\tfilter_design: 'select',\n\t},\n\tprice_ranges: {\n\t\ttype: 'price_range',\n\t},\n\tprice_slider_adaptive_limits: {\n\t\ttype: 'price_slider',\n\t},\n\tprice_slider_design: {\n\t\ttype: 'price_slider',\n\t},\n\tprice_slider_min: {\n\t\ttype: 'price_slider',\n\t\tprice_slider_adaptive_limits: '!:checked',\n\t},\n\tprice_slider_max: {\n\t\ttype: 'price_slider',\n\t\tprice_slider_adaptive_limits: '!:checked',\n\t},\n\tprice_slider_step: {\n\t\ttype: 'price_slider',\n\t},\n\torder_options: {\n\t\ttype: 'orderby',\n\t},\n\tshow_stock_filter: {\n\t\ttype: 'stock_sale',\n\t},\n\tshow_sale_filter: {\n\t\ttype: 'stock_sale',\n\t},\n\tshow_featured_filter: {\n\t\ttype: 'stock_sale',\n\t},\n\ttoggle_style: {\n\t\tshow_toggle: ':checked',\n\t},\n\torder_by: {\n\t\ttype: 'tax',\n\t},\n\torder: {\n\t\ttype: 'tax',\n\t},\n\tshow_count: {\n\t\ttype: [ 'tax', 'price_range', 'review', 'stock_sale' ],\n\t},\n\thierarchical: {\n\t\ttype: 'tax',\n\t\tfilter_design: [ 'checkbox', 'radio', 'text' ],\n\t},\n\tmultiple: {\n\t\ttype: [ 'tax', 'review', 'price_range' ],\n\t\tfilter_design: '!radio',\n\t},\n\trelation: {\n\t\ttype: 'tax',\n\t\tmultiple: ':checked',\n\t},\n\tadoptive: {\n\t\ttype: [ 'tax', 'price_range', 'review', 'stock_sale' ],\n\t},\n};\n\nexport { filterFieldsDependencies };\n","'use strict';\n\n/* global yith_wcan_admin, ajaxurl */\n\nimport { $ } from '../../shortcodes/globals';\n\nexport default class YITH_WCAN_Dependencies_Handler {\n\t// container\n\t$container;\n\n\t// fields;\n\t$fields;\n\n\t// dependencies tree.\n\tdependencies = {};\n\n\t// context object.\n\tcontext = null;\n\n\tconstructor( $container, dependenciesTree, context ) {\n\t\tthis.$container = $container;\n\t\tthis.dependencies = dependenciesTree;\n\t\tthis.context = context || {};\n\n\t\tif ( ! this.$container?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initFields();\n\n\t\tif ( ! this.$fields?.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initDependencies();\n\t}\n\n\tinitFields() {\n\t\tthis.$fields = this.$container.find( ':input' );\n\t}\n\n\tfindField( field, returnContainer ) {\n\t\tlet $field;\n\n\t\tif ( 'function' === typeof this.context.findField ) {\n\t\t\treturn this.context.findField( field, returnContainer );\n\t\t}\n\n\t\t$field = this.$container.find( `:input[name*=\"${ field }\"]` );\n\n\t\tif ( ! $field.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( returnContainer ) {\n\t\t\treturn $field.closest( '.yith-toggle-content-row' );\n\t\t}\n\n\t\treturn $field;\n\t}\n\n\tinitDependencies() {\n\t\tif ( ! Object.keys( this.dependencies ).length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.handleDependencies();\n\t}\n\n\thandleDependencies() {\n\t\tthis.$fields.on( 'change', () => this.applyDependencies() );\n\n\t\tthis.applyDependencies();\n\t}\n\n\tapplyDependencies() {\n\t\tfor ( const [ field, conditions ] of Object.entries(\n\t\t\tthis.dependencies\n\t\t) ) {\n\t\t\tconst $field = this.findField( field, true ),\n\t\t\t\tshow = this.checkFieldConditions( conditions );\n\n\t\t\tif ( show ) {\n\t\t\t\t$field?.css( { display: 'table' } );\n\n\t\t\t\tif ( 'function' === typeof conditions?.__show ) {\n\t\t\t\t\tconditions?.__show( this.context );\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t$field?.hide();\n\n\t\t\t\tif ( 'function' === typeof conditions?.__hide ) {\n\t\t\t\t\tconditions?.__hide( this.context );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckFieldConditions = function ( conditions ) {\n\t\tlet result = true;\n\n\t\tfor ( const [ field, condition ] of Object.entries( conditions ) ) {\n\t\t\tlet $field, fieldValue;\n\n\t\t\tif ( ! result || [ '__show', '__hide' ].includes( field ) ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t$field = this.findField( field, false );\n\n\t\t\tif ( ! $field?.length ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( $field.first().is( 'input[type=\"radio\"]' ) ) {\n\t\t\t\tfieldValue = $field.filter( ':checked' ).val().toString();\n\t\t\t} else {\n\t\t\t\tfieldValue = $field?.val()?.toString();\n\t\t\t}\n\n\t\t\tif ( Array.isArray( condition ) ) {\n\t\t\t\tresult = condition.includes( fieldValue );\n\t\t\t} else if ( typeof condition === 'function' ) {\n\t\t\t\tresult = condition( fieldValue, $field, this.$container );\n\t\t\t} else if ( 0 === condition.indexOf( ':' ) ) {\n\t\t\t\tresult = $field.is( condition );\n\t\t\t} else if ( 0 === condition.indexOf( '!:' ) ) {\n\t\t\t\tresult = ! $field.is( condition.toString().substring( 1 ) );\n\t\t\t} else if ( 0 === condition.indexOf( '!' ) ) {\n\t\t\t\tresult = condition.toString().substring( 1 ) !== fieldValue;\n\t\t\t} else {\n\t\t\t\tresult = condition.toString() === fieldValue;\n\t\t\t}\n\n\t\t\tif ( typeof this.dependencies[ field ] !== 'undefined' ) {\n\t\t\t\tresult =\n\t\t\t\t\tresult &&\n\t\t\t\t\tthis.checkFieldConditions( this.dependencies[ field ] );\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}\n","'use strict';\n\n/* global yith_wcan_admin, ajaxurl */\n\nimport { $, block, serialize, unblock } from '../../shortcodes/globals';\n\nexport default class YITH_WCAN_Filter_Term {\n\t/**\n\t * Term id\n\t */\n\tid;\n\n\t/**\n\t * Dom object for containing term box\n\t */\n\t$term;\n\n\t/**\n\t * Filter object\n\t */\n\tfilter;\n\n\tconstructor( $term, filter ) {\n\t\tif ( ! $term.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$term = $term;\n\t\tthis.filter = filter;\n\n\t\tif ( $term.hasClass( 'initialized' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\t// init object\n\tinit() {\n\t\tthis.initTabs();\n\t\tthis.initImageSelector();\n\t\tthis.initAdditionalColor();\n\t\tthis.initFields();\n\n\t\tthis.$term.addClass( 'initialized' );\n\t}\n\n\tinitTabs() {\n\t\tconst headers = this.$term.find( '.term-tab-header' );\n\n\t\theaders.on( 'click', ( ev ) => {\n\t\t\tconst t = $( ev.target ),\n\t\t\t\ttab = t.data( 'tab' );\n\n\t\t\tev.preventDefault();\n\n\t\t\tthis.showTab( tab );\n\t\t} );\n\n\t\tthis.showTab( this.$term.find( '.term-mode' ).val() );\n\t}\n\n\tinitImageSelector() {\n\t\tlet $imageSelector = this.$term.find( '.image-selector' ),\n\t\t\t$placeholder = $imageSelector.find( '.placeholder-image' ),\n\t\t\t$selected = $imageSelector.find( '.selected-image' ),\n\t\t\t$selectedImg = $selected.find( 'img' ),\n\t\t\t$input = $imageSelector.find( '.term-image' ),\n\t\t\t$clear = $selected.find( '.clear-image' ),\n\t\t\tmedia;\n\n\t\t$placeholder.off( 'click' ).on( 'click', () => {\n\t\t\tblock( $placeholder );\n\n\t\t\tif ( media ) {\n\t\t\t\tmedia.open();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Create a new media frame\n\t\t\tmedia = wp.media( {\n\t\t\t\ttitle: yith_wcan_admin.labels.upload_media,\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: yith_wcan_admin.labels.confirm_media,\n\t\t\t\t},\n\t\t\t\tmultiple: false,\n\t\t\t} );\n\n\t\t\t// When an image is selected in the media frame...\n\t\t\tmedia.on( 'select', function () {\n\t\t\t\t// Get media attachment details from the frame state\n\t\t\t\tconst attachment = media\n\t\t\t\t\t.state()\n\t\t\t\t\t.get( 'selection' )\n\t\t\t\t\t.first()\n\t\t\t\t\t.toJSON();\n\n\t\t\t\t$selectedImg.remove();\n\t\t\t\t$selectedImg = $( '<img/>', {\n\t\t\t\t\tsrc: attachment.url,\n\t\t\t\t} );\n\n\t\t\t\t$selected.prepend( $selectedImg );\n\n\t\t\t\t$input.val( attachment.id ).change();\n\n\t\t\t\tunblock( $placeholder );\n\n\t\t\t\t$placeholder.hide();\n\t\t\t\t$selected.show();\n\t\t\t} );\n\n\t\t\tmedia.on( 'close', function () {\n\t\t\t\tunblock( $placeholder );\n\t\t\t} );\n\n\t\t\t// Finally, open the modal on click\n\t\t\tmedia.open();\n\t\t} );\n\t\t$clear.off( 'click' ).on( 'click', () => {\n\t\t\t$input.val( '' ).change();\n\n\t\t\t$selected.hide();\n\t\t\t$placeholder.show();\n\n\t\t\treturn false;\n\t\t} );\n\n\t\t$input.val() || $clear.click();\n\t}\n\n\tinitAdditionalColor() {\n\t\tconst $addColor = this.$term.find( '.term-add-second-color' ),\n\t\t\t$hideColor = this.$term.find( '.term-hide-second-color' ),\n\t\t\t$color = this.$term.find( '.additional-color' ).find( 'input' ),\n\t\t\tcolor = $color.val();\n\n\t\t$addColor.on( 'click', () => ( this.showAdditionalColor(), false ) );\n\t\t$hideColor.on( 'click', () => ( this.hideAdditionalColor(), false ) );\n\n\t\tif ( color && color !== $color.data( 'default-color' ) ) {\n\t\t\tthis.showAdditionalColor();\n\t\t} else {\n\t\t\tthis.hideAdditionalColor();\n\t\t}\n\t}\n\n\tinitFields() {\n\t\tthis.$term.trigger( 'yith_fields_init' );\n\n\t\tthis.$term\n\t\t\t.find( '.yith-plugin-fw-colorpicker--initialized' )\n\t\t\t.wpColorPicker( 'option', 'change', () =>\n\t\t\t\tthis.filter.afterTermChanged( this )\n\t\t\t);\n\n\t\tthis.$term.on( 'change', ':input', () =>\n\t\t\tthis.filter.afterTermChanged( this )\n\t\t);\n\t}\n\n\t// actions\n\n\tshowTab( tab, force ) {\n\t\tconst headers = this.$term.find( '.term-tab-header' ),\n\t\t\ttabs = this.$term.find( '.tab' ),\n\t\t\tselectedTab = tabs.filter( '.tab-' + tab );\n\n\t\tif (\n\t\t\t! selectedTab.length ||\n\t\t\t( ! headers.is( ':visible' ) && ! force )\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst $activeMode = this.$term.find( '.term-mode' ),\n\t\t\tprevMode = $activeMode.val();\n\n\t\theaders\n\t\t\t.removeClass( 'active' )\n\t\t\t.filter( '[data-tab=\"' + tab + '\"]' )\n\t\t\t.addClass( 'active' );\n\n\t\ttabs.hide();\n\t\tselectedTab.show();\n\t\t$activeMode.val( tab );\n\n\t\tprevMode !== tab && $activeMode.change();\n\t}\n\n\tshowAdditionalColor() {\n\t\tconst trigger = this.$term.find( '.term-add-second-color' );\n\n\t\ttrigger\n\t\t\t.parent()\n\t\t\t.hide()\n\t\t\t.next( '.additional-color' )\n\t\t\t.show()\n\t\t\t.find( '.wp-color-picker' )\n\t\t\t.prop( 'disabled', false )\n\t\t\t.change();\n\t}\n\n\thideAdditionalColor() {\n\t\tconst trigger = this.$term.find( '.term-hide-second-color' );\n\n\t\ttrigger\n\t\t\t.parent()\n\t\t\t.find( '.wp-color-picker' )\n\t\t\t.prop( 'disabled', true )\n\t\t\t.val( '' )\n\t\t\t.change()\n\t\t\t.end()\n\t\t\t.hide()\n\t\t\t.prev( 'p' )\n\t\t\t.show();\n\t}\n\n\tupdateFields( type ) {\n\t\tlet tabToShow = false;\n\n\t\tswitch ( type ) {\n\t\t\tcase 'complete':\n\t\t\t\tthis.$term\n\t\t\t\t\t.find( '.term-tab-headers' )\n\t\t\t\t\t.show()\n\t\t\t\t\t.find( 'a[data-tab=\"color\"], span' )\n\t\t\t\t\t.show();\n\t\t\t\tthis.$term.find( '.tab.tab-color' ).show();\n\t\t\t\tthis.$term.find( '.tab.tab-image' ).show();\n\n\t\t\t\ttabToShow = this.$term.find( '.term-mode' ).val();\n\t\t\t\tbreak;\n\t\t\tcase 'colors_only':\n\t\t\t\tthis.$term\n\t\t\t\t\t.find( '.term-tab-headers' )\n\t\t\t\t\t.show()\n\t\t\t\t\t.find( 'a[data-tab=\"image\"], span' )\n\t\t\t\t\t.hide();\n\t\t\t\tthis.$term.find( '.tab.tab-color' ).show();\n\t\t\t\tthis.$term.find( '.tab.tab-image' ).hide();\n\n\t\t\t\ttabToShow = 'color';\n\t\t\t\tbreak;\n\t\t\tcase 'image_only':\n\t\t\t\tthis.$term\n\t\t\t\t\t.find( '.term-tab-headers' )\n\t\t\t\t\t.show()\n\t\t\t\t\t.find( 'a[data-tab=\"color\"], span' )\n\t\t\t\t\t.hide();\n\t\t\t\tthis.$term.find( '.tab.tab-color' ).hide();\n\t\t\t\tthis.$term.find( '.tab.tab-image' ).show();\n\n\t\t\t\ttabToShow = 'image';\n\t\t\t\tbreak;\n\t\t\tcase 'labels_only':\n\t\t\tdefault:\n\t\t\t\tthis.$term.find( '.term-tab-headers' ).hide();\n\t\t\t\tthis.$term.find( '.tab.tab-color' ).hide();\n\t\t\t\tthis.$term.find( '.tab.tab-image' ).hide();\n\t\t}\n\n\t\ttabToShow && this.showTab( tabToShow, true );\n\t}\n\n\t// data handling\n\n\tgetId() {\n\t\treturn this.id || ( this.id = this.$term.data( 'term_id' ) );\n\t}\n\n\tgetData() {\n\t\tconst termData = serialize( this.$term, {\n\t\t\tformatName: ( v ) =>\n\t\t\t\tv.replace(\n\t\t\t\t\t/filters\\[[0-9]+]\\[terms]\\[[0-9]+]\\[([a-z0-9_-]+)]/,\n\t\t\t\t\t'$1'\n\t\t\t\t),\n\t\t} );\n\t\ttermData.term_id = this.getId();\n\n\t\treturn termData;\n\t}\n}\n","'use strict';\n\n/* global yith_wcan_admin, ajaxurl */\n\nimport { $ } from '../../shortcodes/globals';\n\nexport default class YITH_WCAN_Filter {\n\t/**\n\t * ID of the range\n\t */\n\tid;\n\n\t/**\n\t * Dom object for containing range box\n\t */\n\t$range;\n\n\t/**\n\t * Filter object\n\t */\n\tfilter;\n\n\tconstructor( $range, filter ) {\n\t\tif ( ! $range.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$range = $range;\n\t\tthis.filter = filter;\n\n\t\tif ( $range.hasClass( 'initialized' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\t// init objec\n\n\tinit() {\n\t\tthis.initDependencies();\n\t\tthis.initRemove();\n\n\t\tthis.$range.addClass( 'initialized' );\n\t}\n\n\tinitRemove() {\n\t\tthis.$range.find( 'a.range-remove' ).on( 'click', ( ev ) => {\n\t\t\tev.preventDefault();\n\t\t\tthis.$range.remove();\n\n\t\t\tthis.filter.afterRangeDelete();\n\t\t} );\n\t}\n\n\tinitDependencies() {\n\t\tconst $unlimitedCheck = this.$range.find( '[name*=\"unlimited\"]' );\n\n\t\t// manage unlimited check\n\t\t$unlimitedCheck\n\t\t\t.on( 'change', function () {\n\t\t\t\tconst t = $( this ),\n\t\t\t\t\t$max = t.closest( '.range-box' ).find( '.max' );\n\n\t\t\t\tif ( t.is( ':checked' ) ) {\n\t\t\t\t\t$max.hide();\n\t\t\t\t} else {\n\t\t\t\t\t$max.show();\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.change();\n\t}\n\n\t// actions\n\n\tpopulate( rangeData ) {\n\t\tconst { min, max, unlimited } = rangeData;\n\n\t\tthis.$range.find( '.min' ).find( ':input' ).val( min );\n\t\tthis.$range.find( '.max' ).find( ':input' ).val( max );\n\t\tthis.$range\n\t\t\t.find( '.unlimited' )\n\t\t\t.find( ':input' )\n\t\t\t.prop( 'checked', unlimited );\n\t}\n\n\ttoggleUnlimited( show ) {\n\t\tconst $unlimitedContainer = this.$range.find( '.unlimited' ),\n\t\t\t$unlimitedCheck = $unlimitedContainer.find( ':input' );\n\n\t\tshow && $unlimitedContainer.show();\n\t\tshow ||\n\t\t\t( $unlimitedCheck.prop( 'checked', false ).change(),\n\t\t\t$unlimitedContainer.hide() );\n\t}\n\n\t// data handling\n\n\tgetId() {\n\t\treturn this.id || ( this.id = this.$range.data( 'range_id' ) );\n\t}\n}\n","'use strict';\n\n/* global yith_wcan_admin, ajaxurl */\n\nimport Ajax from './ajax';\nimport {\n\t$,\n\tblock,\n\tunblock,\n\tserialize,\n\tremoveHierarchyFromString,\n} from '../../shortcodes/globals';\nimport { filterFieldsDependencies } from '../conf';\n\nimport YITH_WCAN_Dependencies_Handler from './yith-wcan-dependencies-handler';\nimport YITH_WCAN_Filter_Term from './yith-wcan-filter-term';\nimport YITH_WCAN_Filter_Range from './yith-wcan-filter-range';\n\nexport default class YITH_WCAN_Filter {\n\t/**\n\t * Unique ID of the filter\n\t */\n\tid;\n\n\t/**\n\t * Dom object for containing filter form\n\t */\n\t$filter;\n\n\t/**\n\t * Preset object\n\t */\n\tpreset;\n\n\t/**\n\t * Terms map\n\t */\n\tterms = new Map();\n\n\t/**\n\t * Ranges map\n\t */\n\tranges = new Map();\n\n\tconstructor( $filter, preset ) {\n\t\tif ( ! $filter.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$filter = $filter;\n\t\tthis.$toggleTitle = $filter.find( '.yith-toggle-title' );\n\t\tthis.$title = $filter.find( 'h3.title' );\n\t\tthis.preset = preset;\n\n\t\tif ( $filter.hasClass( 'initialized' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.init();\n\t}\n\n\t// init object\n\tinit() {\n\t\tthis.initTitle();\n\t\tthis.initToggle();\n\t\tthis.initSave();\n\t\tthis.initDelete();\n\t\tthis.initClone();\n\t\tthis.initTerms();\n\t\tthis.initRanges();\n\t\tthis.initDependencies();\n\t\tthis.initFields();\n\n\t\tthis.$filter.addClass( 'initialized' );\n\t}\n\n\tinitTitle() {\n\t\tconst $field = this.$filter.find( '.heading-field' ).first();\n\n\t\tif ( this.$title.length && $field.length ) {\n\t\t\t$field.on( 'keyup', () => {\n\t\t\t\tconst v = $field.val();\n\t\t\t\tthis.$title.html(\n\t\t\t\t\tv ||\n\t\t\t\t\t\t`<span class=\"no-title\">${ yith_wcan_admin.labels.no_title }</span>`\n\t\t\t\t);\n\t\t\t} );\n\t\t}\n\t}\n\n\tinitToggle() {\n\t\tthis.$toggleTitle.on( 'click', ( ev ) => {\n\t\t\tconst $target = $( ev.target );\n\n\t\t\tif ( $target.closest( '.filter-actions' ).length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isOpen() ? this.close() : this.open();\n\t\t} );\n\t}\n\n\tinitDependencies() {\n\t\tnew YITH_WCAN_Dependencies_Handler(\n\t\t\tthis.$filter,\n\t\t\tfilterFieldsDependencies,\n\t\t\tthis\n\t\t);\n\t}\n\n\tinitFields() {\n\t\tthis.$filter.trigger( 'yith_fields_init' );\n\n\t\tthis.initTermSearch();\n\t\tthis.initCustomizeTerms();\n\t\tthis.initTaxonomy();\n\t\tthis.initType();\n\t\tthis.initDesign();\n\t\tthis.initCurrencyFields();\n\t\tthis.initErrorsHandling();\n\t}\n\n\tinitTermSearch() {\n\t\tconst $termSearch = this.$filter.find( '.term-search' ).first(),\n\t\t\t$taxonomySelect = this.$filter.find( '.taxonomy' ).first(),\n\t\t\t$container = $termSearch.closest( '.yith-plugin-fw-field-wrapper' ),\n\t\t\tgetAjaxParams = function ( params ) {\n\t\t\t\treturn {\n\t\t\t\t\tterm: params.term,\n\t\t\t\t\tall: typeof params.all !== 'undefined' ? params.all : 0,\n\t\t\t\t\ttaxonomy: $taxonomySelect.val(),\n\t\t\t\t\tselected: $termSearch.val(),\n\t\t\t\t\taction: 'yith_wcan_search_term',\n\t\t\t\t\tsecurity: yith_wcan_admin.nonce.search_term,\n\t\t\t\t};\n\t\t\t},\n\t\t\tselect2_args = {\n\t\t\t\tplaceholder: $( this ).data( 'placeholder' ),\n\t\t\t\tminimumInputLength: '1',\n\t\t\t\ttemplateSelection( option ) {\n\t\t\t\t\treturn removeHierarchyFromString( option.text );\n\t\t\t\t},\n\t\t\t\ttemplateResult( option ) {\n\t\t\t\t\treturn option.text.replace( '&amp;', '&' );\n\t\t\t\t},\n\t\t\t\tajax: {\n\t\t\t\t\turl: ajaxurl,\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdelay: 250,\n\t\t\t\t\tdata: getAjaxParams,\n\t\t\t\t\tprocessResults( data ) {\n\t\t\t\t\t\tconst terms = [];\n\t\t\t\t\t\tif ( data ) {\n\t\t\t\t\t\t\t$.each( data, function ( id, text ) {\n\t\t\t\t\t\t\t\tterms.push( { id, text } );\n\t\t\t\t\t\t\t} );\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tresults: terms,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t\tcache: true,\n\t\t\t\t},\n\t\t\t\tsorter( items ) {\n\t\t\t\t\treturn items;\n\t\t\t\t},\n\t\t\t};\n\n\t\t// init terms select\n\t\t$termSearch.selectWoo( select2_args );\n\n\t\t// on term changes redraw Customize terms section\n\t\t$termSearch.on( 'change', ( ev, ignoreVisibility ) =>\n\t\t\tthis.afterTermsSelected( ignoreVisibility )\n\t\t);\n\n\t\t// add all button\n\t\t$container.find( '.yith-plugin-fw-select-all' ).on( 'click', ( ev ) => {\n\t\t\tev.preventDefault();\n\n\t\t\tif ( ! this.confirmAddAllTerms( $taxonomySelect ) ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tblock( $container );\n\n\t\t\t$.get( ajaxurl, getAjaxParams( { term: '', all: 1 } ) ).then(\n\t\t\t\t( data ) => {\n\t\t\t\t\tlet selected = $termSearch.val();\n\n\t\t\t\t\tif ( ! selected ) {\n\t\t\t\t\t\tselected = [];\n\t\t\t\t\t}\n\n\t\t\t\t\t$termSearch.find( 'option' ).not( ':selected' ).remove();\n\t\t\t\t\tfor ( const [ termId, termLabel ] of Object.entries(\n\t\t\t\t\t\tdata\n\t\t\t\t\t) ) {\n\t\t\t\t\t\tselected.push( termId );\n\n\t\t\t\t\t\t$termSearch.append(\n\t\t\t\t\t\t\t$( '<option/>', {\n\t\t\t\t\t\t\t\tvalue: termId,\n\t\t\t\t\t\t\t\ttext: termLabel,\n\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\t$termSearch.val( selected ).trigger( 'change', [ true ] );\n\n\t\t\t\t\tunblock( $container );\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn false;\n\t\t} );\n\n\t\t// remove all button\n\t\t$container\n\t\t\t.find( '.yith-plugin-fw-deselect-all' )\n\t\t\t.on( 'click', function ( ev ) {\n\t\t\t\tev.preventDefault();\n\n\t\t\t\t$termSearch.find( 'option' ).remove().end().val( '' ).change();\n\n\t\t\t\treturn false;\n\t\t\t} );\n\t}\n\n\tinitCustomizeTerms() {\n\t\tconst $customizeTerms = this.$filter\n\t\t\t\t.find( '.customize-terms' )\n\t\t\t\t.find( 'input' ),\n\t\t\t$orderBy = this.$filter.find( '.order-by' );\n\n\t\t$customizeTerms\n\t\t\t.on( 'change', () => {\n\t\t\t\t$orderBy\n\t\t\t\t\t.find( '[value=\"include\"]' )\n\t\t\t\t\t.prop( 'disabled', ! $customizeTerms.is( ':checked' ) );\n\t\t\t\t$orderBy\n\t\t\t\t\t.removeClass( 'enhanced' )\n\t\t\t\t\t.trigger( 'wc-enhanced-select-init' );\n\t\t\t\t! $orderBy.val() && $orderBy.val( 'name' );\n\n\t\t\t\tthis.afterTermsSelected();\n\t\t\t} )\n\t\t\t.change();\n\t}\n\n\tinitTaxonomy() {\n\t\tconst $taxonomySelect = this.$filter.find( '.taxonomy' ).first(),\n\t\t\t$filterDesign = this.$filter.find( '.filter-design' ).first();\n\n\t\t$filterDesign.on( 'change', () => this.customizeTermsNotice() );\n\t\t$taxonomySelect.on( 'change', () => {\n\t\t\tconst prevValue = $taxonomySelect.data( 'taxonomy' ),\n\t\t\t\tcurrentValue = $taxonomySelect.val();\n\n\t\t\tprevValue !== currentValue && this.afterTaxonomyChange();\n\t\t} );\n\t}\n\n\tafterTaxonomyChange() {\n\t\tconst $termSearch = this.$filter.find( '.term-search' ).first();\n\n\t\t// clear terms select when taxonomy is changed\n\t\t$termSearch.find( 'option' ).remove().end().change();\n\n\t\t// handle changes to Customize Terms description\n\t\tthis.customizeTermsNotice();\n\t}\n\n\tcustomizeTermsNotice() {\n\t\tconst $taxonomySelect = this.$filter.find( '.taxonomy' ).first(),\n\t\t\t$filterDesign = this.$filter.find( '.filter-design' ).first(),\n\t\t\t$customizeTermsWrapper = this.$filter\n\t\t\t\t.find( '.customize-terms' )\n\t\t\t\t.parent(),\n\t\t\t$customizeTermsRow = $customizeTermsWrapper.closest(\n\t\t\t\t'.yith-toggle-content-row'\n\t\t\t),\n\t\t\t$customizeTermsDescription =\n\t\t\t\t$customizeTermsWrapper.next( '.description' ),\n\t\t\t$customizeTerms = $customizeTermsWrapper.find( 'input' ),\n\t\t\t$wcclNotice = $customizeTermsDescription.find( '.wccl-notice' ),\n\t\t\t$imagesNotice = $customizeTermsDescription.find( '.images-notice' ),\n\t\t\ttaxonomies = $taxonomySelect.data( 'taxonomies' ),\n\t\t\ttaxonomy = $taxonomySelect.val(),\n\t\t\tfilterDesign = $filterDesign.val();\n\n\t\t// show Colors & Labels notice\n\t\tif (\n\t\t\t! yith_wcan_admin.yith_wccl_enabled ||\n\t\t\t! taxonomies[ taxonomy ]?.is_attribute\n\t\t) {\n\t\t\t$wcclNotice.hide();\n\t\t} else {\n\t\t\t$wcclNotice.show();\n\t\t}\n\n\t\t// show images notice\n\t\tif (\n\t\t\t! taxonomies[ taxonomy ]?.supports_images ||\n\t\t\t'label' !== filterDesign\n\t\t) {\n\t\t\t$imagesNotice.hide();\n\t\t} else {\n\t\t\t$imagesNotice.show();\n\t\t}\n\n\t\t// hide option if not needed\n\t\tif (\n\t\t\t'color' === filterDesign &&\n\t\t\t( ! yith_wcan_admin.yith_wccl_enabled ||\n\t\t\t\t! taxonomies[ taxonomy ]?.is_attribute )\n\t\t) {\n\t\t\t$customizeTerms.prop( 'checked', true );\n\t\t\t$customizeTermsRow.addClass( 'disabled' );\n\t\t} else {\n\t\t\t$customizeTermsRow.removeClass( 'disabled' );\n\t\t}\n\t}\n\n\tinitType() {\n\t\tconst $filterType = this.$filter.find( '.filter-type' ),\n\t\t\t$filterDesign = this.$filter.find( '.filter-design' );\n\n\t\t$filterType\n\t\t\t.on( 'change', () => {\n\t\t\t\tconst filterType = $filterType.val(),\n\t\t\t\t\tdesigns = Object.entries(\n\t\t\t\t\t\tyith_wcan_admin.supported_designs\n\t\t\t\t\t),\n\t\t\t\t\tunsupported = {\n\t\t\t\t\t\treview: [ 'color', 'label' ],\n\t\t\t\t\t\tprice_range: [ 'color', 'label' ],\n\t\t\t\t\t};\n\n\t\t\t\tfor ( const [ design, designName ] of designs ) {\n\t\t\t\t\tconst $opt = $filterDesign.find( `[value=\"${ design }\"]` );\n\t\t\t\t\tif ( unsupported?.[ filterType ]?.includes( design ) ) {\n\t\t\t\t\t\t$opt.remove();\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( $opt.length ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t$filterDesign.append(\n\t\t\t\t\t\t$( '<option/>', {\n\t\t\t\t\t\t\tvalue: design,\n\t\t\t\t\t\t\ttext: designName,\n\t\t\t\t\t\t} )\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t$filterDesign.change();\n\t\t\t} )\n\t\t\t.change();\n\t}\n\n\tinitDesign() {\n\t\tconst $filterType = this.$filter.find( '.filter-design' );\n\n\t\t$filterType.on( 'change', () => this.updateTermFields() ).change();\n\t}\n\n\tinitCurrencyFields() {\n\t\tthis.$filter.find( '[data-currency]' ).each( function () {\n\t\t\tconst $field = $( this ),\n\t\t\t\t$currencySpan = $( '<span/>', {\n\t\t\t\t\ttext: $field.data( 'currency' ),\n\t\t\t\t\tclass: 'currency',\n\t\t\t\t} );\n\n\t\t\t$field.after( $currencySpan );\n\t\t} );\n\t}\n\n\tinitErrorsHandling() {\n\t\t/**\n\t\t * Invalid event does not bubble, so we need to handle it for each filter added\n\t\t * https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/invalid_event\n\t\t */\n\t\tthis.$filter.find( ':input' ).on( 'invalid', ( ev ) => {\n\t\t\tconst target = ev.target,\n\t\t\t\t$target = $( target );\n\n\t\t\tev.preventDefault();\n\n\t\t\tthis.preset.goToFilter( this.$filter, $target ).done( () => {\n\t\t\t\tthis.addInputValidationMessage(\n\t\t\t\t\t$target,\n\t\t\t\t\ttarget.validationMessage\n\t\t\t\t);\n\t\t\t} );\n\t\t} );\n\n\t\tthis.$filter.on( 'change keydown', ':input', function () {\n\t\t\tconst $input = $( this );\n\n\t\t\tif ( $input.hasClass( 'validation-error' ) ) {\n\t\t\t\t// remove any validation class\n\t\t\t\t$input\n\t\t\t\t\t.removeClass( 'validation-error' )\n\t\t\t\t\t.removeClass( 'required-field-empty' );\n\n\t\t\t\t// remove any error message\n\t\t\t\t$input.next( '.validation-message' ).remove();\n\t\t\t}\n\t\t} );\n\t}\n\n\t// init actions\n\n\tinitSave() {\n\t\tthis.$filter\n\t\t\t.find( '.save' )\n\t\t\t.on( 'click', () => ( this.maybeSave(), false ) );\n\t}\n\n\tinitClone() {\n\t\tthis.$filter.find( '.clone' ).on( 'click', () => this.clone() );\n\t}\n\n\tinitDelete() {\n\t\tthis.$filter.find( '.delete' ).on( 'click', () => this.maybeDelete() );\n\t}\n\n\t// actions\n\n\tmaybeSave() {\n\t\tif ( ! this.validate() ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.save().done( ( data ) => {\n\t\t\tthis.preset.maybeSetId( data?.id );\n\t\t\tthis.close();\n\t\t} );\n\t}\n\n\tsave( maybeBlock = true ) {\n\t\tconst preset_id = this.preset.getId(),\n\t\t\tfilter = this.getData(),\n\t\t\tfilter_id = this.getId(),\n\t\t\t$prev_filter = this.$filter.prev( '.filter-row' ),\n\t\t\ttermsPool = this.getTermsPool(),\n\t\t\tprev_filter_id = $prev_filter.length\n\t\t\t\t? $prev_filter.attr( 'id' ).replace( 'filter_', '' )\n\t\t\t\t: -1;\n\n\t\t// send terms.\n\t\tfilter.terms = Object.fromEntries(\n\t\t\ttermsPool.map( ( term ) => [ term.term_id, term ] )\n\t\t);\n\t\tfilter.terms_order = termsPool.map( ( term ) => term.term_id );\n\n\t\treturn Ajax.post.call(\n\t\t\tmaybeBlock ? this.$filter : null,\n\t\t\t'save_preset_filter',\n\t\t\t{\n\t\t\t\tpreset: preset_id,\n\t\t\t\tfilter,\n\t\t\t\tfilter_id,\n\t\t\t\tprev_filter_id,\n\t\t\t\t_wpnonce: yith_wcan_admin.nonce.save_preset_filter,\n\t\t\t}\n\t\t);\n\t}\n\n\tclone() {\n\t\tthis.preset.addFilter( this.getData() );\n\t}\n\n\tmaybeDelete() {\n\t\tif ( confirm( yith_wcan_admin.messages.confirm_delete ) ) {\n\t\t\tthis.delete().then( () => {\n\t\t\t\tthis.$filter.remove();\n\t\t\t\tthis.preset.afterFilterDelete( this );\n\t\t\t} );\n\t\t}\n\t}\n\n\tdelete() {\n\t\tconst preset_id = this.preset.getId();\n\n\t\tif ( ! preset_id ) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst filter_id = this.getId();\n\n\t\tif ( ! filter_id ) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\treturn Ajax.post.call( this.$filter, 'delete_preset_filter', {\n\t\t\tpreset: preset_id,\n\t\t\tfilter_id,\n\t\t\t_wpnonce: yith_wcan_admin.nonce.delete_preset_filter,\n\t\t} );\n\t}\n\n\tvalidate() {\n\t\tconst layout = this.preset.$layout.find( ':checked' ).val(),\n\t\t\t$title = this.findField( 'title', false ),\n\t\t\ttitle = $title.val();\n\n\t\t// horizontal layout needs title for each filter\n\t\tif ( 'horizontal' === layout && ! title ) {\n\t\t\tthis.addInputValidationMessage(\n\t\t\t\t$title,\n\t\t\t\tyith_wcan_admin.messages.filter_title_required\n\t\t\t);\n\t\t\tthis.preset.goToFilter( this );\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// trigger default browser validation.\n\t\treturn this.$filter\n\t\t\t.find( ':input' )\n\t\t\t.get()\n\t\t\t.reduce( ( valid, node ) => {\n\t\t\t\treturn valid && node.reportValidity();\n\t\t\t}, true );\n\t}\n\n\tupdateLayout( layout ) {\n\t\tconst $showToggle = this.findField( 'show_toggle' ),\n\t\t\t$tooltips = this.findField( 'tooltip', false );\n\n\t\tif ( 'horizontal' === layout ) {\n\t\t\t$showToggle\n\t\t\t\t?.hide()\n\t\t\t\t.find( ':input' )\n\t\t\t\t.prop( 'checked', false )\n\t\t\t\t.val( 'no' )\n\t\t\t\t.change();\n\t\t\t$tooltips?.parent().hide();\n\t\t} else {\n\t\t\t$showToggle?.show();\n\t\t\t$tooltips?.parent().show();\n\t\t}\n\t}\n\n\t// data handling\n\n\tgetId() {\n\t\treturn (\n\t\t\tthis.id ||\n\t\t\t( this.id = this.$filter.attr( 'id' ).replace( 'filter_', '' ) )\n\t\t);\n\t}\n\n\tgetRowIndex() {\n\t\treturn this.$filter.data( 'item_key' );\n\t}\n\n\tgetData() {\n\t\treturn {\n\t\t\t...serialize( this.$filter, {\n\t\t\t\tformatName: ( v ) =>\n\t\t\t\t\tv.replace( /filters\\[[0-9]+]\\[([a-z_-]+)]/, '$1' ),\n\t\t\t\tfilterItems: ( i, v ) => ! $( v ).is( '[name*=\"[terms]\"]' ),\n\t\t\t} ),\n\t\t\tterms: this.getTermsPool(),\n\t\t};\n\t}\n\n\tpopulate( filterData ) {\n\t\tconst row_id = this.getId();\n\n\t\tfor ( const i in filterData ) {\n\t\t\tconst value = filterData[ i ];\n\n\t\t\tlet nameId =\n\t\t\t\t\t'terms' === i\n\t\t\t\t\t\t? `filters_${ row_id }_term_ids`\n\t\t\t\t\t\t: `filters_${ row_id }_${ i }`,\n\t\t\t\t$input = this.$filter.find( `#${ nameId }` );\n\n\t\t\tif ( ! $input.length && 'price_ranges' !== i ) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif ( 'terms' === i ) {\n\t\t\t\tfor ( const term of value ) {\n\t\t\t\t\tif ( ! term?.label ) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst newOption = $( '<option/>', {\n\t\t\t\t\t\tvalue: term.term_id,\n\t\t\t\t\t\ttext: term.label,\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t} );\n\n\t\t\t\t\t$input.append( newOption );\n\t\t\t\t}\n\n\t\t\t\tthis.$filter.find( '.terms-wrapper' ).data( 'terms', value );\n\t\t\t\t$input.val( value.map( ( term ) => term.term_id ) ).change();\n\t\t\t\tthis.updateTerms( true );\n\t\t\t} else if ( 'price_ranges' === i ) {\n\t\t\t\tconst ranges = value;\n\n\t\t\t\tif ( 'object' !== typeof ranges ) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor ( const j in ranges ) {\n\t\t\t\t\tconst range = ranges[ j ];\n\n\t\t\t\t\tthis.addRange( range );\n\t\t\t\t}\n\t\t\t} else if ( $input.is( ':checkbox' ) ) {\n\t\t\t\t$input\n\t\t\t\t\t.prop( 'checked', value === 'yes' )\n\t\t\t\t\t.val( value )\n\t\t\t\t\t.change();\n\t\t\t} else if ( $input.is( '[data-type=\"radio\"]' ) ) {\n\t\t\t\t$input\n\t\t\t\t\t.find( ':input' )\n\t\t\t\t\t.prop( 'checked', false )\n\t\t\t\t\t.filter( '[value=\"' + value + '\"]' )\n\t\t\t\t\t.prop( 'checked', true )\n\t\t\t\t\t.change();\n\t\t\t} else if ( 'title' === i ) {\n\t\t\t\t$input.val( filterData[ i ] ).keyup();\n\t\t\t} else if ( 'taxonomy' === i ) {\n\t\t\t\t$input.data( 'taxonomy', value ).val( value );\n\t\t\t} else {\n\t\t\t\t$input.val( filterData[ i ] ).change();\n\t\t\t}\n\t\t}\n\t}\n\n\t// toggle accordions.\n\n\tisOpen() {\n\t\treturn this.$filter.hasClass( 'filter-row-opened' );\n\t}\n\n\topen() {\n\t\t// fix title\n\t\tthis.$toggleTitle\n\t\t\t.find( '.title-arrow' )\n\t\t\t.removeClass( 'yith-icon-arrow-right-alt' )\n\t\t\t.addClass( 'yith-icon-arrow-down-alt' );\n\n\t\t// animate content and return promise\n\t\treturn this.$filter\n\t\t\t.addClass( 'filter-row-opened' )\n\t\t\t.find( '.yith-toggle-content' )\n\t\t\t.slideDown()\n\t\t\t.promise();\n\t}\n\n\tisClosed() {\n\t\treturn ! this.isOpen();\n\t}\n\n\tclose() {\n\t\t// fix title\n\t\tthis.$filter\n\t\t\t.find( '.yith-toggle-title' )\n\t\t\t.find( '.title-arrow' )\n\t\t\t.addClass( 'yith-icon-arrow-right-alt' )\n\t\t\t.removeClass( 'yith-icon-arrow-down-alt' );\n\n\t\t// animate content and return promise\n\t\treturn this.$filter\n\t\t\t.find( '.yith-toggle-content' )\n\t\t\t.slideUp( 400, () => {\n\t\t\t\tthis.$filter.removeClass( 'filter-row-opened' );\n\t\t\t} )\n\t\t\t.promise();\n\t}\n\n\t// term handling\n\n\tgetTermsPool() {\n\t\treturn [\n\t\t\t...this.$filter.find( '.terms-wrapper' ).data( 'terms' ).values(),\n\t\t].filter( ( term ) => !! term );\n\t}\n\n\tgetTermsToShow() {\n\t\tlet termsPool = this.getTermsPool(),\n\t\t\tperPage = parseInt( yith_wcan_admin.terms_per_page );\n\n\t\tif (\n\t\t\ttermsPool &&\n\t\t\tthis.termsPaginated &&\n\t\t\tperPage &&\n\t\t\tObject.keys( termsPool ).length > perPage\n\t\t) {\n\t\t\ttermsPool = termsPool.slice( 0, perPage );\n\t\t} else {\n\t\t\tthis.$filter.find( '.show-more-terms' ).hide();\n\t\t}\n\n\t\treturn termsPool;\n\t}\n\n\tgetTermsType() {\n\t\tconst $filterType = this.$filter.find( '.filter-design' ),\n\t\t\tfilterType = $filterType?.val();\n\n\t\tif ( 'label' !== filterType && 'color' !== filterType ) {\n\t\t\treturn 'labels_only';\n\t\t} else if ( 'color' === filterType ) {\n\t\t\treturn 'complete';\n\t\t}\n\n\t\treturn 'image_only';\n\t}\n\n\tinitTerms() {\n\t\tconst $terms = this.$filter.find( '.term-box' ),\n\t\t\t$orderBy = this.$filter.find( '.order-by' ),\n\t\t\t$showMore = this.$filter.find( '.show-more-terms' );\n\n\t\tthis.termsPaginated = !! this.$filter.find( '.show-more-terms' ).length;\n\n\t\tfor ( const termNode of $terms.get() ) {\n\t\t\tconst $term = $( termNode ),\n\t\t\t\tterm = new YITH_WCAN_Filter_Term( $term, this );\n\n\t\t\tthis.terms.set( term.getId(), term );\n\t\t}\n\n\t\t$showMore.on( 'click', () => this.showMoreTerms() );\n\t\t$orderBy\n\t\t\t.on( 'change', () => {\n\t\t\t\tconst v = $orderBy.val(),\n\t\t\t\t\tmethodToRun =\n\t\t\t\t\t\t'include' === v\n\t\t\t\t\t\t\t? 'initTermsDragDrop'\n\t\t\t\t\t\t\t: 'destroyTermsDragDrop';\n\n\t\t\t\tthis[ methodToRun ]();\n\t\t\t} )\n\t\t\t.change();\n\n\t\tthis.updateTermFields();\n\t}\n\n\tinitTermsDragDrop() {\n\t\ttry {\n\t\t\tthis.$filter.find( '.terms-wrapper' ).sortable( {\n\t\t\t\tcursor: 'move',\n\t\t\t\tscrollSensitivity: 40,\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\thelper: 'clone',\n\t\t\t\tstop: () => {\n\t\t\t\t\tlet termsPool = this.getTermsPool(),\n\t\t\t\t\t\tnewPool = [],\n\t\t\t\t\t\tshownOrder = this.$filter\n\t\t\t\t\t\t\t.find( '.term-box' )\n\t\t\t\t\t\t\t.get()\n\t\t\t\t\t\t\t.map( ( termNode ) =>\n\t\t\t\t\t\t\t\tparseInt( termNode.dataset.term_id )\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\tshownOrder.forEach( ( termId ) => {\n\t\t\t\t\t\tconst termIndex = termsPool.findIndex(\n\t\t\t\t\t\t\t( term ) => term.term_id === termId\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tnewPool.push( termsPool[ termIndex ] );\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( this.termsPaginated ) {\n\t\t\t\t\t\tnewPool = newPool.concat(\n\t\t\t\t\t\t\ttermsPool.slice( yith_wcan_admin.terms_per_page )\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.$filter\n\t\t\t\t\t\t.find( '.terms-wrapper' )\n\t\t\t\t\t\t.data( 'terms', newPool );\n\t\t\t\t},\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\t// do nothing.\n\t\t}\n\t}\n\n\tdestroyTermsDragDrop() {\n\t\ttry {\n\t\t\tthis.$filter.find( '.terms-wrapper' ).sortable( 'destroy' );\n\t\t} catch ( e ) {\n\t\t\t// do nothing.\n\t\t}\n\t}\n\n\t// terms actions.\n\n\tafterTermsSelected( ignoreVisibility = false ) {\n\t\tconst $termSearch = this.$filter.find( '.term-search' ),\n\t\t\tselectedTerms = $termSearch.val().map( ( id ) => parseInt( id ) ), //\n\t\t\ttermsPool = this.getTermsPool(),\n\t\t\ttermType = this.getTermsType(),\n\t\t\texistingTerms = termsPool.map( ( term ) => term.term_id ),\n\t\t\ttoAdd = selectedTerms.filter(\n\t\t\t\t( termId ) => ! existingTerms.includes( termId )\n\t\t\t),\n\t\t\ttoRemove = existingTerms.filter(\n\t\t\t\t( termId ) => ! selectedTerms.includes( termId )\n\t\t\t);\n\n\t\ttoRemove.forEach( ( termId ) => {\n\t\t\tdelete termsPool[\n\t\t\t\ttermsPool.findIndex( ( term ) => termId === term?.term_id )\n\t\t\t];\n\t\t} );\n\t\ttoAdd.forEach( ( termId ) => {\n\t\t\tconst termLabel = $termSearch\n\t\t\t\t.find( `[value=\"${ termId }\"]` )\n\t\t\t\t.text();\n\n\t\t\ttermsPool.push( {\n\t\t\t\tid: this.getId(),\n\t\t\t\tterm_id: termId,\n\t\t\t\tlabel: termLabel,\n\t\t\t\tname: termLabel,\n\t\t\t\tcolor_1: '#007694',\n\t\t\t\tcolor_2: '',\n\t\t\t\tmode: 'images_only' === termType ? 'image' : 'color',\n\t\t\t} );\n\t\t} );\n\n\t\tif ( toRemove.length || toAdd.length ) {\n\t\t\ttoAdd.length && ( this.termsPaginated = false );\n\t\t\tthis.$filter.find( '.terms-wrapper' ).data( 'terms', termsPool );\n\t\t\tthis.updateTerms( ignoreVisibility );\n\t\t}\n\t}\n\n\tafterTermChanged( term ) {\n\t\tconst termsPool = this.getTermsPool(),\n\t\t\ttermId = term.getId(),\n\t\t\ttermIndex = termsPool.findIndex(\n\t\t\t\t( _term ) => termId === _term?.term_id\n\t\t\t);\n\n\t\ttermsPool[ termIndex ] = term.getData();\n\t\tthis.$filter.find( '.terms-wrapper' ).data( 'terms', termsPool );\n\t}\n\n\tupdateTerms( ignoreVisibility = false ) {\n\t\tconst $termsContainer = this.$filter.find( '.terms-wrapper' );\n\n\t\tif ( ! ignoreVisibility && ! $termsContainer.is( ':visible' ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedTerms = this.getTermsToShow(),\n\t\t\tnewTerms = new Map(),\n\t\t\tnewTermTemplate = wp.template( 'yith-wcan-filter-term' ),\n\t\t\t$existingTerms = $termsContainer.find( '.term-box' );\n\n\t\t$existingTerms.detach();\n\n\t\tif ( selectedTerms ) {\n\t\t\tfor ( const selectedTerm of selectedTerms ) {\n\t\t\t\tlet term, $term;\n\n\t\t\t\tif ( this.terms.has( selectedTerm.term_id ) ) {\n\t\t\t\t\tterm = this.terms.get( selectedTerm.term_id );\n\t\t\t\t\t$term = term.$term;\n\t\t\t\t} else {\n\t\t\t\t\t$term = $( newTermTemplate( selectedTerm ) );\n\t\t\t\t}\n\n\t\t\t\t$term.length && $termsContainer.append( $term );\n\t\t\t\tterm || ( term = new YITH_WCAN_Filter_Term( $term, this ) );\n\t\t\t\tterm && newTerms.set( selectedTerm.term_id, term );\n\t\t\t}\n\t\t}\n\n\t\tthis.terms = newTerms;\n\t\tthis.updateTermFields();\n\t}\n\n\tshowMoreTerms() {\n\t\tthis.termsPaginated = false;\n\t\tthis.updateTerms();\n\t}\n\n\tupdateTermFields() {\n\t\tconst type = this.getTermsType();\n\n\t\t[ ...this.terms.values() ].map( ( term ) => {\n\t\t\treturn term.updateFields( type );\n\t\t} );\n\t}\n\n\tconfirmAddAllTerms() {\n\t\tconst $taxonomySelect = this.$filter.find( '.taxonomy' ).first(),\n\t\t\tv = $taxonomySelect.val(),\n\t\t\tdetails = $taxonomySelect.data( 'taxonomies' ),\n\t\t\tmessage = yith_wcan_admin.messages.confirm_add_all_terms;\n\n\t\tif ( details[ v ]?.terms_count && details[ v ]?.terms_count > 1 ) {\n\t\t\treturn confirm(\n\t\t\t\tmessage.replace( '%s', details[ v ]?.terms_count )\n\t\t\t);\n\t\t}\n\t\treturn true;\n\t}\n\n\t// ranges handling.\n\n\tinitRanges() {\n\t\tconst $ranges = this.$filter.find( '.range-box' );\n\n\t\tthis.initAddRange();\n\t\tthis.initRangesDragDrop();\n\n\t\tfor ( const rangeNode of $ranges.get() ) {\n\t\t\tconst $range = $( rangeNode ),\n\t\t\t\trange = new YITH_WCAN_Filter_Range( $range, this );\n\n\t\t\tthis.ranges.set( range.getId(), range );\n\t\t}\n\n\t\tthis.initRangesPosition();\n\t}\n\n\tinitAddRange() {\n\t\tconst $addRange = this.$filter.find( '.add-price-range' );\n\n\t\t$addRange.on( 'click', ( ev ) => {\n\t\t\tev.preventDefault();\n\n\t\t\tthis.addRange();\n\t\t\tthis.initRangesPosition();\n\t\t} );\n\t}\n\n\tinitRangesPosition() {\n\t\tfor ( const range of this.ranges.values() ) {\n\t\t\trange.toggleUnlimited( range.$range.is( ':last-child' ) );\n\t\t}\n\t}\n\n\tinitRangesDragDrop() {\n\t\tconst $rangesWrapper = this.$filter.find( '.ranges-wrapper' );\n\n\t\t$rangesWrapper.sortable( {\n\t\t\tcursor: 'move',\n\t\t\tscrollSensitivity: 40,\n\t\t\tforcePlaceholderSize: true,\n\t\t\thelper: 'clone',\n\t\t\tstop: () => {\n\t\t\t\tconst replaceIndex = ( prevIndex, currentIndex ) => {\n\t\t\t\t\treturn ( i, attr ) =>\n\t\t\t\t\t\tattr.replace( prevIndex, currentIndex );\n\t\t\t\t};\n\n\t\t\t\tfor ( const range of this.ranges.values() ) {\n\t\t\t\t\tconst $range = range.$range,\n\t\t\t\t\t\tcurrentIndex = $range.index(),\n\t\t\t\t\t\tprevIndex = $range.data( 'range_id' ),\n\t\t\t\t\t\treplacer = replaceIndex( prevIndex, currentIndex );\n\n\t\t\t\t\t$range\n\t\t\t\t\t\t.data( 'range_id', currentIndex )\n\t\t\t\t\t\t.find( ':input' )\n\t\t\t\t\t\t.attr( 'name', replacer )\n\t\t\t\t\t\t.attr( 'id', replacer );\n\t\t\t\t}\n\n\t\t\t\tthis.initRangesPosition();\n\t\t\t},\n\t\t} );\n\t}\n\n\t// ranges actions.\n\n\taddRange( data, index ) {\n\t\tconst newRangeTemplate = wp.template( 'yith-wcan-filter-range' ),\n\t\t\tnewRange = newRangeTemplate( {\n\t\t\t\tid: this.getRowIndex(),\n\t\t\t\trange_id: index || this.getNextRangeIndex(),\n\t\t\t\tmin: 0,\n\t\t\t\tmax: 0,\n\t\t\t} ),\n\t\t\t$newRange = $( newRange ),\n\t\t\trange = new YITH_WCAN_Filter_Range( $newRange, this );\n\n\t\tdata && range.populate( data );\n\n\t\tthis.ranges.set( range.getId(), range );\n\t\tthis.$filter.find( '.ranges-wrapper' ).append( $newRange );\n\n\t\treturn $newRange;\n\t}\n\n\tafterRangeDelete( range ) {\n\t\tthis.ranges.delete( range.getId() );\n\t\tthis.initRangesPosition();\n\t}\n\n\t// utils\n\n\tfindField( field, returnContainer = true ) {\n\t\tlet $field;\n\n\t\tswitch ( field ) {\n\t\t\tcase 'terms_options':\n\t\t\t\t$field = this.$filter.find( '.terms-wrapper' );\n\t\t\t\tbreak;\n\t\t\tcase 'price_ranges':\n\t\t\t\t$field = this.$filter.find( '.ranges-wrapper' );\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\t$field = this.$filter.find( ':input[name*=\"[' + field + ']\"]' );\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif ( ! $field.length ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif ( returnContainer ) {\n\t\t\treturn $field.closest( '.yith-toggle-content-row' );\n\t\t}\n\n\t\treturn $field;\n\t}\n\n\tgetNextRangeIndex() {\n\t\tconst $rangeWrapper = this.$filter.find( '.ranges-wrapper' );\n\t\tlet currentIndex = $rangeWrapper.data( 'index' ),\n\t\t\tnextIndex = 0;\n\n\t\tif ( ! currentIndex ) {\n\t\t\tcurrentIndex = [ ...this.ranges.values() ].reduce( ( a, range ) => {\n\t\t\t\treturn Math.max( a, range.getId() );\n\t\t\t}, 0 );\n\t\t}\n\n\t\tnextIndex = ++currentIndex;\n\t\t$rangeWrapper.data( 'index', nextIndex );\n\n\t\treturn nextIndex;\n\t}\n\n\taddInputValidationMessage( $input, message ) {\n\t\tconst $message = $( '<span/>', {\n\t\t\tclass: 'validation-message',\n\t\t\ttext: message,\n\t\t} );\n\n\t\t$input\n\t\t\t.addClass( 'required-field-empty' )\n\t\t\t.addClass( 'validation-error' )\n\t\t\t.next( '.validation-message' )\n\t\t\t.remove()\n\t\t\t.end()\n\t\t\t.after( $message );\n\t}\n}\n","'use strict';\n\n/* global yith_wcan_admin, ajaxurl */\n\nimport Ajax from './ajax';\nimport { $, block, serialize, unblock } from '../../shortcodes/globals';\nimport YITH_WCAN_Filter from './yith-wcan-filter';\n\nexport default class YITH_WCAN_Preset {\n\t// status\n\trowIndex = 0;\n\n\t// dom objects\n\t$wrapper;\n\t$mainAddNewFilterButton;\n\t$loadMoreFiltersButtons;\n\t$filtersContainer;\n\t$layout;\n\t$page;\n\n\t// filters\n\tfilters = new Map();\n\n\tconstructor( $wrapper ) {\n\t\tif ( ! $wrapper.length ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$wrapper = $wrapper;\n\t\tthis.$mainAddNewFilterButton = this.$wrapper.find( '#add_new_filter' );\n\t\tthis.$filtersContainer = this.$wrapper.find( '.preset-filters' );\n\t\tthis.$layout = this.$wrapper.find( '#preset_layout' );\n\t\tthis.$page = this.$wrapper.find( '#paged' );\n\t\tthis.$loadMoreFiltersButtons =\n\t\t\tthis.$wrapper.find( '.load-more-filters' );\n\n\t\tthis.init();\n\t}\n\n\t// init object\n\tinit() {\n\t\tthis.initFilters();\n\t\tthis.initAddFilter();\n\t\tthis.initLoadMoreFilters();\n\t\tthis.initLayout();\n\t\tthis.initSubmit();\n\t}\n\n\t// general init\n\tinitAddFilter() {\n\t\tthis.$wrapper.find( '.add-new-filter' ).on( 'click', () => {\n\t\t\tthis.addFilter();\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\tinitLoadMoreFilters() {\n\t\tthis.$loadMoreFiltersButtons.on( 'click', () => {\n\t\t\tthis.loadMoreFilters();\n\n\t\t\treturn false;\n\t\t} );\n\t}\n\n\tinitSubmit() {\n\t\tthis.$wrapper.find( '#submit' ).on( 'click', ( ev ) => {\n\t\t\tif ( ! this.$wrapper.find( 'form' ).get( 0 ).reportValidity() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif ( ! this.validateFilters() ) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tev.preventDefault();\n\n\t\t\tblock( this.$wrapper );\n\n\t\t\treturn Ajax.post\n\t\t\t\t.call( null, 'save_preset', this.getData() )\n\t\t\t\t.then( ( data ) => {\n\t\t\t\t\tthis.maybeSetId( data?.id );\n\n\t\t\t\t\tconst promises = [ ...this.filters.values() ].map(\n\t\t\t\t\t\t( filter ) => filter.save( false )\n\t\t\t\t\t);\n\n\t\t\t\t\treturn Promise.all( promises );\n\t\t\t\t} )\n\t\t\t\t.then( () => ( window.location = this.getUrl() ) );\n\t\t} );\n\t}\n\n\tinitLayout() {\n\t\tthis.$layout\n\t\t\t.on( 'change', 'input', () => this.afterLayoutChange() )\n\t\t\t.find( 'input' )\n\t\t\t.first()\n\t\t\t.change();\n\t}\n\n\tinitFilters() {\n\t\t// init filter drag & drop\n\t\tthis.initFiltersDragDrop();\n\n\t\tconst $filters = this.$filtersContainer.find( '.filter-row' );\n\n\t\t// filter specific init\n\t\tfor ( const filterNode of $filters.get() ) {\n\t\t\tconst $filter = $( filterNode ),\n\t\t\t\tfilter = new YITH_WCAN_Filter( $filter, this );\n\n\t\t\tthis.filters.set( filter.getId(), filter );\n\t\t}\n\t}\n\n\tinitFiltersDragDrop() {\n\t\tthis.$filtersContainer.sortable( {\n\t\t\tcursor: 'move',\n\t\t\thandle: '.yith-toggle-title',\n\t\t\taxis: 'y',\n\t\t\tscrollSensitivity: 40,\n\t\t\tforcePlaceholderSize: true,\n\t\t} );\n\t}\n\n\tafterLayoutChange() {\n\t\tconst layout = this.$layout.find( ':checked' ).val();\n\n\t\tfor ( const filter of this.filters.values() ) {\n\t\t\tfilter.updateLayout( layout );\n\t\t}\n\t}\n\n\t// filter actions\n\n\tfilterExists( filterId ) {\n\t\treturn this.filters.has( filterId );\n\t}\n\n\taddFilter( data, index ) {\n\t\tconst newFilterTemplate = wp.template( 'yith-wcan-filter' ),\n\t\t\tnewFilter = newFilterTemplate( {\n\t\t\t\tid: index || this.nextRowIndex(),\n\t\t\t\tkey: this.filters.size,\n\t\t\t} ),\n\t\t\t$newFilter = $( newFilter ),\n\t\t\tfilter = new YITH_WCAN_Filter( $newFilter, this );\n\n\t\tdata && filter.populate( data );\n\n\t\tthis.$filtersContainer.append( $newFilter );\n\t\tthis.afterFilterAdd( filter );\n\n\t\treturn $newFilter;\n\t}\n\n\tafterFilterAdd( filter ) {\n\t\tthis.filters.set( filter.getId(), filter );\n\t\tthis.closeAllFilters().then( () => this.goToFilter( filter ) );\n\t\tthis.updateRowIndex();\n\t\tthis.maybeHideEmptyBox();\n\n\t\tthis.$mainAddNewFilterButton.show();\n\t}\n\n\tafterFilterDelete( filter ) {\n\t\tthis.filters.delete( filter.getId() );\n\t\tthis.maybeShowEmptyBox();\n\n\t\tif ( ! this.filters.size ) {\n\t\t\tthis.$mainAddNewFilterButton.hide();\n\t\t}\n\t}\n\n\tcloseAllFilters() {\n\t\tconst promises = [ ...this.filters.values() ].map( ( filter ) =>\n\t\t\tfilter.close()\n\t\t);\n\n\t\treturn Promise.all( promises );\n\t}\n\n\tloadMoreFilters() {\n\t\tlet page = this.$page.val();\n\n\t\tAjax.get\n\t\t\t.call( this.$loadMoreFiltersButtons, 'load_more_filters', {\n\t\t\t\tpreset: this.getId(),\n\t\t\t\tpage: ++page,\n\t\t\t\t_wpnonce: yith_wcan_admin.nonce.load_more_filters,\n\t\t\t} )\n\t\t\t.done( ( data ) => {\n\t\t\t\tif ( ! data ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( data.filters ) {\n\t\t\t\t\tfor ( const filterData of data.filters ) {\n\t\t\t\t\t\tconst filterId = filterData.id;\n\n\t\t\t\t\t\tif ( this.filterExists( filterId ) ) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.addFilter( filterData, filterId );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif ( ! data.has_more ) {\n\t\t\t\t\tthis.$loadMoreFiltersButtons.remove();\n\t\t\t\t\tthis.$page.remove();\n\t\t\t\t\tthis.$page = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis.$page.val( page );\n\t\t\t\t}\n\t\t\t} );\n\t}\n\n\tvalidateFilters() {\n\t\treturn [ ...this.filters.values() ].reduce(\n\t\t\t( valid, filter ) => valid && filter.validate(),\n\t\t\ttrue\n\t\t);\n\t}\n\n\tgoToFilter( filter, $target ) {\n\t\tif ( filter.isOpen() ) {\n\t\t\t$target = $target || filter.$filter;\n\n\t\t\treturn $( 'html, body' )\n\t\t\t\t.stop( true )\n\t\t\t\t.animate( {\n\t\t\t\t\tscrollTop: $target.offset().top - 100,\n\t\t\t\t} )\n\t\t\t\t.promise();\n\t\t}\n\n\t\treturn $( 'html, body' )\n\t\t\t.stop( true )\n\t\t\t.animate( {\n\t\t\t\tscrollTop: filter.$filter.offset().top - 100,\n\t\t\t} )\n\t\t\t.promise()\n\t\t\t.done( () => {\n\t\t\t\tfilter.open();\n\n\t\t\t\tif ( ! $target || ! $target.length ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$( 'html, body' ).animate( {\n\t\t\t\t\tscrollTop: $target.offset().top - 100,\n\t\t\t\t} );\n\t\t\t} );\n\t}\n\n\t// indexes\n\n\tgetId() {\n\t\treturn this.$wrapper.find( '#preset_id' ).val();\n\t}\n\n\tgetUrl() {\n\t\tconst currentUrl = new URL( window.location ),\n\t\t\tid = this.getId();\n\n\t\tif ( id ) {\n\t\t\tcurrentUrl.searchParams.set( 'action', 'edit' );\n\t\t\tcurrentUrl.searchParams.set( 'preset', id );\n\t\t}\n\n\t\treturn currentUrl.toString();\n\t}\n\n\tmaybeSetId( newId ) {\n\t\tif ( this.getId() || ! newId ) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$wrapper.find( '#preset_id' ).val( newId );\n\t}\n\n\tstatic getRowIndex( $row ) {\n\t\tconst index = $row.data( 'item_key' );\n\n\t\treturn index ? parseInt( index ) : 0;\n\t}\n\n\tupdateRowIndex() {\n\t\tlet maxIndex = this.$filtersContainer.data( 'max-filter-id' ),\n\t\t\tmaxKey = Math.max( ...this.filters.keys() );\n\n\t\tthis.rowIndex = Math.max( maxIndex, maxKey );\n\t}\n\n\tnextRowIndex() {\n\t\tif ( ! this.rowIndex ) {\n\t\t\tthis.updateRowIndex();\n\t\t}\n\n\t\treturn ++this.rowIndex;\n\t}\n\n\tcurrentRowIndex() {\n\t\tif ( ! this.rowIndex ) {\n\t\t\tthis.updateRowIndex();\n\t\t}\n\n\t\treturn this.rowIndex;\n\t}\n\n\t// utils\n\n\tgetData() {\n\t\treturn serialize( this.$wrapper, {\n\t\t\tfilterItems: ( i, v ) => ! $( v ).is( '[name^=\"filters\"]' ),\n\t\t} );\n\t}\n\n\tmaybeShowEmptyBox() {\n\t\tconst emptyBox = this.$filtersContainer.children(\n\t\t\t'.yith-wcan-admin-no-post'\n\t\t);\n\n\t\tif (\n\t\t\temptyBox.length &&\n\t\t\t! emptyBox.is( ':visible' ) &&\n\t\t\t! this.filters.size\n\t\t) {\n\t\t\temptyBox.show();\n\t\t}\n\t}\n\n\tmaybeHideEmptyBox() {\n\t\tconst emptyBox = this.$filtersContainer.children(\n\t\t\t'.yith-wcan-admin-no-post'\n\t\t);\n\n\t\tif (\n\t\t\temptyBox.length &&\n\t\t\temptyBox.is( ':visible' ) &&\n\t\t\tthis.filters.size\n\t\t) {\n\t\t\temptyBox.hide();\n\t\t}\n\t}\n}\n","'use strict';\n\n/* global jQuery */\n\nimport YITH_WCAN_Preset from './modules/yith-wcan-preset';\n\njQuery( ( $ ) => {\n\tconst $wrapper = $( '#yith_wcan_panel_filter-preset-edit' );\n\n\tif ( ! $wrapper.length ) {\n\t\treturn;\n\t}\n\n\t// Init filters handling\n\t$( document )\n\t\t.on( 'yith_wcan_filters_init', function () {\n\t\t\tnew YITH_WCAN_Preset( $wrapper );\n\t\t} )\n\t\t.trigger( 'yith_wcan_filters_init' );\n} );\n"],"names":["$","jQuery","$body","block","$el","fn","background","yith_wcan_shortcodes","loader","message","overlayCSS","opacity","unblock","serialize","formatName","filterItems","result","inputs","find","not","filter","each","t","name","attr","value","replace","is","val","indexOf","components","split","map","c","firstComponent","shift","newItem","reverse","reduce","res","key","extend","removeHierarchyFromString","trim","request","method","action","params","args","$wrapper","FormData","append","ajaxArgs","url","ajaxurl","data","dataType","beforeSend","length","complete","ajax","get","call","post","filterFieldsDependencies","taxonomy","type","use_all_terms","term_ids","filter_design","customize_terms","terms_options","v","__show","afterTermsSelected","label_position","column_number","show_search","price_ranges","price_slider_adaptive_limits","price_slider_design","price_slider_min","price_slider_max","price_slider_step","order_options","show_stock_filter","show_sale_filter","show_featured_filter","toggle_style","show_toggle","order_by","order","show_count","hierarchical","multiple","relation","adoptive","YITH_WCAN_Dependencies_Handler","$container","dependenciesTree","context","conditions","Object","entries","field","condition","$field","fieldValue","includes","findField","first","toString","Array","isArray","substring","dependencies","checkFieldConditions","initFields","$fields","initDependencies","returnContainer","closest","keys","handleDependencies","on","applyDependencies","show","css","display","hide","__hide","YITH_WCAN_Filter_Term","$term","hasClass","init","initTabs","initImageSelector","initAdditionalColor","addClass","headers","ev","target","tab","preventDefault","showTab","$imageSelector","$placeholder","$selected","$selectedImg","$input","$clear","media","off","open","wp","title","yith_wcan_admin","labels","upload_media","button","text","confirm_media","attachment","state","toJSON","remove","src","prepend","id","change","click","$addColor","$hideColor","$color","color","showAdditionalColor","hideAdditionalColor","trigger","wpColorPicker","afterTermChanged","force","tabs","selectedTab","$activeMode","prevMode","removeClass","parent","next","prop","end","prev","tabToShow","termData","term_id","getId","YITH_WCAN_Filter","$range","initRemove","afterRangeDelete","$unlimitedCheck","$max","rangeData","min","max","unlimited","$unlimitedContainer","Ajax","YITH_WCAN_Filter_Range","$filter","preset","Map","$toggleTitle","$title","initTitle","initToggle","initSave","initDelete","initClone","initTerms","initRanges","html","no_title","$target","isOpen","close","initTermSearch","initCustomizeTerms","initTaxonomy","initType","initDesign","initCurrencyFields","initErrorsHandling","$termSearch","$taxonomySelect","getAjaxParams","term","all","selected","security","nonce","search_term","select2_args","placeholder","minimumInputLength","templateSelection","option","templateResult","delay","processResults","terms","push","results","cache","sorter","items","selectWoo","ignoreVisibility","confirmAddAllTerms","then","termId","termLabel","$customizeTerms","$orderBy","$filterDesign","customizeTermsNotice","prevValue","currentValue","afterTaxonomyChange","$customizeTermsWrapper","$customizeTermsRow","$customizeTermsDescription","$wcclNotice","$imagesNotice","taxonomies","filterDesign","yith_wccl_enabled","is_attribute","supports_images","$filterType","filterType","designs","supported_designs","unsupported","review","price_range","design","designName","$opt","updateTermFields","$currencySpan","after","goToFilter","done","addInputValidationMessage","validationMessage","maybeSave","clone","maybeDelete","validate","save","maybeSetId","maybeBlock","preset_id","getData","filter_id","$prev_filter","termsPool","getTermsPool","prev_filter_id","fromEntries","terms_order","_wpnonce","save_preset_filter","addFilter","confirm","messages","confirm_delete","afterFilterDelete","Promise","resolve","delete_preset_filter","layout","$layout","filter_title_required","valid","node","reportValidity","$showToggle","$tooltips","i","filterData","row_id","nameId","label","newOption","updateTerms","ranges","j","range","addRange","keyup","slideDown","promise","slideUp","values","perPage","parseInt","terms_per_page","termsPaginated","slice","$terms","$showMore","termNode","set","showMoreTerms","methodToRun","sortable","cursor","scrollSensitivity","forcePlaceholderSize","helper","stop","newPool","shownOrder","dataset","forEach","termIndex","findIndex","concat","e","selectedTerms","termType","getTermsType","existingTerms","toAdd","toRemove","color_1","color_2","mode","_term","$termsContainer","getTermsToShow","newTerms","newTermTemplate","template","$existingTerms","detach","selectedTerm","has","updateFields","details","confirm_add_all_terms","terms_count","$ranges","initAddRange","initRangesDragDrop","rangeNode","initRangesPosition","$addRange","toggleUnlimited","$rangesWrapper","replaceIndex","prevIndex","currentIndex","index","replacer","newRangeTemplate","newRange","getRowIndex","range_id","getNextRangeIndex","$newRange","populate","$rangeWrapper","nextIndex","a","Math","$message","YITH_WCAN_Preset","$mainAddNewFilterButton","$filtersContainer","$page","$loadMoreFiltersButtons","initFilters","initAddFilter","initLoadMoreFilters","initLayout","initSubmit","loadMoreFilters","validateFilters","promises","filters","window","location","getUrl","afterLayoutChange","initFiltersDragDrop","$filters","filterNode","handle","axis","updateLayout","filterId","newFilterTemplate","newFilter","nextRowIndex","size","$newFilter","afterFilterAdd","closeAllFilters","updateRowIndex","maybeHideEmptyBox","maybeShowEmptyBox","page","load_more_filters","filterExists","has_more","animate","scrollTop","offset","top","currentUrl","URL","searchParams","newId","maxIndex","maxKey","rowIndex","emptyBox","children","$row","document"],"sourceRoot":""}